# QA

Описание особенностей тестирования проекта

## TOC

- [QA](#qa)
  - [TOC](#toc)
    - [Unit tests](#unit-tests)
    - [Integration tests](#integration-tests)
  - [Links](#links)


### Unit tests

Для проведения unit тестирования необходимо запустить:

```shell
# Run unit tests
go test ./...
```
### Integration tests

Интеграционные тесты занимают продолжительное время поэтому в автоматическом режиме запускаются только из **protected** веток.

Для принудительного запуска интеграционного тестирования в коммит сообщении необходимо добавить "~integration~"

Интеграционные тесты используют последнюю версию чейнкода [ACL](https://gitlab.n-t.io/core/application/on-chain/chaincode/system/acl). При запуске интеграционных тестов выполняется `.prepare` проекта foundation: 
- клонируется код репозитория ACL;
- определяется текущая версия модуля foundation;
- выполняется замена версии модуля и его зависимостей на текущую версию.

Если интеграционный тест завершиться с ошибкой, необходимо определить нарушена ли обратная совместимость. Если нарушена, то:
  - в репозитории ACL создать ветку с таким же именем как ветка, в которой проведены изменения
  - внести правки в версию модуля foundation
  - внести правки в импорты модуля foundation в репозитория ACL
  - повторно запустить интеграционные тесты.

Команда принудительного запуска интеграционных тестов:

```
git commit -m "~integration~ ready to merge in master multi-emission feature #170"
```

## Links

* No
